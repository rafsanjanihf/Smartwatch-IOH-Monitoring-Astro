---
import iohSmLogo from '/assets/images/ioh-sm-logo.png';
import iohLgLogo from '/assets/images/ioh-lg-logo.png';
---

<header class="bg-white border-b border-gray-200 fixed top-0 right-0 left-0 md:left-64 h-16 z-10">
  <div class="flex items-center justify-between h-full px-3 sm:px-4 lg:px-6">
    <!-- Logo - Only visible on mobile -->
    <div class="flex items-center md:hidden">
      <img 
        src={iohLgLogo.src} 
        alt="Indosat IOH" 
        class="h-8 w-auto"
        loading="lazy"
      />
    </div>

    <!-- Spacer for desktop (hidden logo area) -->
    <div class="hidden md:block"></div>

    <!-- User Controls -->
    <div class="flex items-center space-x-1 sm:space-x-2 lg:space-x-3">
      <!-- User Profile -->
      <div class="flex items-center space-x-2 ml-2">
        <!-- User name - Hidden on small screens -->
        <span class="text-sm font-medium text-gray-700">Terretech Nusantara</span>
        
        <!-- User avatar -->
        <div class="relative">
          <img
            src={iohSmLogo.src}
            alt="User Avatar"
            class="w-8 h-8 sm:w-9 sm:h-9 rounded-full border-2 border-gray-200 hover:border-gray-300 transition-colors cursor-pointer"
            loading="lazy"
          />
          <!-- Online status indicator -->
          <span class="absolute bottom-0 right-0 h-2.5 w-2.5 bg-green-500 border-2 border-white rounded-full"></span>
        </div>
      </div>
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle handler
  function initializeMobileMenu() {
    const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
    const sidebar = document.querySelector('[data-sidebar]') || document.querySelector('aside');
    
    if (mobileMenuToggle && sidebar) {
      mobileMenuToggle.addEventListener('click', () => {
        sidebar.classList.toggle('-translate-x-full');
        sidebar.classList.toggle('translate-x-0');
        
        // Toggle overlay
        let overlay = document.getElementById('sidebar-overlay');
        if (!overlay) {
          overlay = document.createElement('div');
          overlay.id = 'sidebar-overlay';
          overlay.className = 'fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden';
          overlay.addEventListener('click', () => {
            sidebar.classList.add('-translate-x-full');
            sidebar.classList.remove('translate-x-0');
            overlay?.remove();
          });
          document.body.appendChild(overlay);
        } else {
          overlay.remove();
        }
      });
    }
  }

  // Initialize mobile menu when DOM is ready
  document.addEventListener('DOMContentLoaded', initializeMobileMenu);
</script>

<style>
  /* Header responsive adjustments */
  @media (max-width: 768px) {
    header {
      left: 0 !important;
    }
  }

  /* Smooth transitions */
  button {
    transition: all 0.2s ease-in-out;
  }

  button:hover {
    transform: translateY(-1px);
  }

  /* Focus states for accessibility */
  button:focus,
  input:focus {
    outline: 2px solid #3B82F6;
    outline-offset: 2px;
  }

  /* Mobile menu animation */
  #mobile-menu-toggle svg {
    transition: transform 0.2s ease-in-out;
  }

  #mobile-menu-toggle:hover svg {
    transform: scale(1.1);
  }

  /* Notification badge animation */
  .absolute.-top-1.-right-1 {
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.7;
    }
  }

  /* User avatar hover effect */
  img[alt="User Avatar"]:hover {
    transform: scale(1.05);
  }

  /* Responsive text sizing */
  @media (max-width: 480px) {
    .text-sm {
      font-size: 0.75rem;
    }
  }

  /* Logo styling for mobile */
  .flex.items-center.md\\:hidden img {
    transition: transform 0.2s ease-in-out;
  }

  .flex.items-center.md\\:hidden img:hover {
    transform: scale(1.05);
  }

  /* Ensure proper spacing on mobile */
  @media (max-width: 768px) {
    .flex.items-center.justify-between {
      padding-left: 1rem;
      padding-right: 1rem;
    }
  }
</style>
